---
title: "R for Data Science - Solutions Manual"
author: "Jonathan Mendes de Almeida"
output:
    pdf_document:
      latex_engine: xelatex
---

Solutions to the exercises in __[R for Data Science (Garrett Grolemund & Hadley Wickham)](http://r4ds.had.co.nz/index.html).__

# Chapter 1
No exercises in this chapter.

# Chapter 2
No exercises in this chapter.

# Chapter 3
## Prerequisites

```{r eval = TRUE}
library(tidyverse)
```

### To install tidyverse library:

```{r eval = FALSE}
install.packages('tidyverse')
```

## mpg data frame

```{r eval = TRUE}
mpg = ggplot2::mpg
mpg
```

* **displ**: car's engine size (in litres)
* **hwy**: car's fuel efficiency on the highway (in miles per gallon - mpg).

## 3.2.4 Exercises

### Exercise 1
>  Run **ggplot(data = mpg)**. What do you see?

```{r eval = TRUE}
ggplot(data = mpg)
```

**R)** An empty plot. To see some nice plots we should add some geom_function to map some points. Add a good caption for each axis is great to make your plot easier to read and understand!

### Exercise 2
> How many rows are in **mpg**? How many columns?

```{r eval = TRUE}
nrow(mpg)
ncol(mpg)
```

**R)** 234 rows and 11 columns


Alternative method to check the number of rows and columns of a data frame:

```{r eval = TRUE}
glimpse(mpg)
```

### Exercise 3
> What does the __drv__ variable describe? Read the help for ?mpg to find out.
_run ?mpg in RStudio console and check the 'help' tab)_

```{r eval = TRUE}
mpg['drv']
```

**R)** The **drv** variable describes the traction control system. There are 3 possible values for **drv** variable (**variable** : _description_):
 
* **f**: _front-wheel drive_

* **r**: _rear wheel drive_

* **4**: _4wd_

### Exercise 4
> Make a scatterplot of **hwy** vs **cyl**

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = hwy, y = cyl, colour = class))
```

**R)** We add a definition of the data used in x,y axis and add geom_point function mapping these points. Here we are using aes(colour = class) (to associate the name of the aesthetic with a variable to display) to plot using a different colour for each class present in our data frame (car type: 2seater, compact, midsize, minivan, pickup, subcompact, suv).

### Exercise 5
> What happens if you make a scatterplot of *class* __vs__ *drv*? Why is the plot not useful?

```{r eval = TRUE}
ggplot(data = mpg, aes(x = class, y = drv)) + geom_point()
```

**R)** This plot is not useful because **class** and **drv** are factor variables. Each possible value of these two variables is limited by a set (r, f and 4 are the possible values for **drv**  and 2seater, compact, midsize, minivan, pickup, subcompact and suv are the possible values for **class**). This plot is pretty useless to perform a data analysis.

## 3.3.1 Exercises

### Exercise 1
> What's gone wrong with this code? Why are the points not blue?

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = "blue"))
```

**R)** The **color** argument is not in the correct place. The **color** argument is included inside the **mapping** argument so it is treated as an aesthetic, which receives a variable (like we used **class** as argument in previous exercise). In this case, the **color** argument is interpreted as a variable with only one value (which is "blue" in this case).

If the goal is to plot all these points using blue, the correct code is:

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy), color = "blue")
```


### Exercise 2
> Which variables in **mpg** are categorical? Which variables are continuous? (**Hint:** _type **?mpg** (using RStudio console) to read the documentation for the dataset_). How can you see this information when you run **mpg**?

If you are not able to classify each variable as categorical or continuous by checking the description of each variable (by typing **?mpg**) you can print the data frame and R will answer this for you (another way to check this information is using the glimpse() function). 

```{r eval = TRUE}
mpg
```

As you can see, the information is given at top of each column within '<>'. If the variable is categorical, it will have a class of 'character' (represented as **<chr>**). So, once you know where to find this is information is easy to anwser which variable is categorical and which is continuous.  

* **model**: categorical

* **displ**: continuous

* **year**: continuous

* **cyl**: continuous

* **trans**: categorical

* **drv**: categorical

* **cty**: continuous

* **hwy**: continuous

* **fl**: categorical

* **class**: categorical

### Exercise 3
> Map a continuous variable to **color**, **size** and **shape**. How do these aesthetics behave differently for **categorical** _vs_ **continuous** variables?

_Using the varible **cty** (city miles per gallon) - which is a continuous variable._

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, colour = cty))
```

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, size = cty))
```

**R)** When mapped to colour: the continuous variable uses a scale that varies using tons of blue (light to dark). 

When mapped to size: the continuous variable uses a scale that varies using different sizes.

These information is easy to verify by checking these two previous plots. 

However, when mapped to shape, R will give an error (a continuous variable can not be mapped to shape). This is because shapes does not have a natural order.

###  Exercise 4
> What happens if you map the same variable to multiple aesthetics?

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, colour = displ, size = hwy))
```

Mapping one variable to multiple aesthetics is not a good idea because is redundant. Using different variables and the plot will show more information about your dataset. The next plot uses four different variables in aesthetics, which gives useful aditional information when compared to all the previous plots.

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, colour = cty, size = cyl))
```

### Exercise 5
> What does the **stroke** aesthetic do? What shapes does it work with? (Hint: use **?geom_point** and check the 'help' tab)

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, shape = drv), stroke = 5)
```

**R)** The **stroke** aesthetic is used to modify the width of the border. 

### Exercise 6
> What happens if you map an aesthetic to something other than a variable name, like **aes(colour = displ < 5)**?

**R)** The colour indicates if each **displ** value is less than 4 or not. The ggpplot function will assign the result of this expression (displ < 5, which is going to be true or false) to a temporary variable and then will assign a colour for values > 4 and a different colour for values < 4). This is easy visualize by checking the results of this code:

```{r eval = TRUE}
ggplot(data = mpg) + geom_point(mapping = aes(x = hwy, y = cyl, colour = displ < 4))
```

